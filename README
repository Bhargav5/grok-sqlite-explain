you need pygraphviz... and graphviz!

you will note that the __main__ block assumes you have a schemainfo.txt and an
explained.txt in /tmp

I get these like so:

sqlite3-cvs global-messages-db.sqlite 'explain SELECT * FROM messages INNER JOIN messagesText ON messages.id = messagesText.rowid WHERE id IN (SELECT docid FROM messagesText WHERE subject MATCH "sutherland") AND deleted = 0 AND folderID IS NOT NULL AND messageKey IS NOT NULL ORDER BY date DESC LIMIT 100;' > /tmp/explained.txt

$ sqlite3-cvs global-messages-db.sqlite '.schema messages%' > /tmp/schemainfo.txt


The point with schemainfo is that it tells us about your tables and indices
to help us infer things.  You want to dump the schema for the tables involved
in the query.

The explained is just the EXPLAIN OUTPUT, as you can see.  My app (gloda)
outputs its queries via debug.  Then I just run a standalone-built sqlite
against the database to get the explain output.

Towards the end of developing this, I realized that if I built my own copy of
sqlite from CVS with -DSQLITE_DEBUG=1, it would provide extra useful
information in the comment column.  I think the code optionally accepts this,
but doesn't require it.  It is what shows up after the # in the display, if
it's there.  The main thing it provides you is reliable information on column/
index/table names, arguably more reliable than my schema extracted information
there.

Er, and it outputs to equally hardcoded dot file paths.  You would want to run
dot against these to generate pretty pictures.  For my purposes, dot was the
best of the available apps.
